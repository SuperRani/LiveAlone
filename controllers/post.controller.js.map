{"version":3,"file":"post.controller.js","sourceRoot":"","sources":["post.controller.ts"],"names":[],"mappings":";;;;;;;;;;AACA,KAAK;AACL,mDAA6C;AAOzC;IACI,KAAK;IACC,QAAQ,CAAC,GAAY,EAAE,GAAa;;YAEtC,MAAM,IAAI,GAAG,MAAM,kBAAO,EAAE,CAAC;YAC7B,IAAI;gBAEA,iIAAiI;gBACjI,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;gBACtD,OAAO,CAAC,GAAG,CAAC,SAAS,GAAE,KAAK,CAAC,CAAC;gBAE9B,6BAA6B;aAGhC;YAAA,OAAO,CAAC,EAAE;gBAEP,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aAClB;QACL,CAAC;KAAA;IAKD,KAAK;IACC,OAAO,CAAC,GAAY,EAAE,GAAa;;YACrC,gCAAgC;YAChC,QAAQ;YACR,oCAAoC;YACpC,wEAAwE;YACxE,oFAAoF;YACpF,6BAA6B;YAC7B,8BAA8B;YAC9B,QAAQ;YACR,eAAe;YACf,sBAAsB;YACtB,IAAI;YACJ,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC1B,CAAC;KAAA;IAET,oGAAoG;IAEpG,kEAAkE;IAClE,oEAAoE;IAG5D,MAAM;IACC,UAAU,CAAC,GAAY,EAAE,GAAa;;YACzC,gCAAgC;YAChC,QAAQ;YACR,wCAAwC;YACxC,EAAE;YACF,kEAAkE;YAClE,8DAA8D;YAC9D,EAAE;YACF,iBAAiB;YACjB,sCAAsC;YACtC,UAAU;YACV,EAAE;YACF,eAAe;YACf,sBAAsB;YACtB,IAAI;YAEJ,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC1B,CAAC;KAAA;IAID,QAAQ;IACD,UAAU,CAAC,GAAY,EAAE,GAAa;;YACzC,gCAAgC;YAChC,QAAQ;YACR,oCAAoC;YACpC,EAAE;YACF,EAAE;YACF,oEAAoE;YACpE,iBAAiB;YACjB,kCAAkC;YAClC,UAAU;YACV,EAAE;YACF,eAAe;YACf,sBAAsB;YACtB,IAAI;YAEJ,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC1B,CAAC;KAAA;IAGD,QAAQ;IACD,UAAU,CAAC,GAAY,EAAE,GAAa;;YACzC,gCAAgC;YAChC,QAAQ;YACR,oCAAoC;YACpC,2CAA2C;YAC3C,EAAE;YACF,kFAAkF;YAClF,iBAAiB;YACjB,kCAAkC;YAClC,UAAU;YACV,EAAE;YACF,eAAe;YACf,sBAAsB;YACtB,IAAI;YACJ,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC1B,CAAC;KAAA;CAEJ;AACY,QAAA,cAAc,GAAG,IAAI,cAAc,EAAE,CAAC","sourcesContent":["import { Request, Response } from 'express'\n// DB\nimport { connect} from '../database/database'\n\n// Interfaces\nimport { Board } from '../interface/Board'\nimport {Pool} from \"mysql2/promise\";\n\n\n    class PostController{\n        //get\n        async getPosts(req: Request, res: Response): Promise<Response | void> {\n        \n            const conn = await connect();\n            try {\n            \n                // const sql =  `SELECT @RNUM := @RNUM + 1 AS NO, a.* FROM (SELECT * FROM board  ORDER BY bNum ASC ) a, ( SELECT @RNUM := 0 ) b`;\n                const Board = await conn.query('CALL usp_get_board;');\n                console.log('Board 값'+ Board);\n                \n                // return res.json(Board[0]);\n                \n            \n            }catch (e) {\n            \n                console.log(e);\n            }\n        }\n\n\n\n\n        //get\n        async getPost(req: Request, res: Response) {\n            // const conn = await connect();\n            // try {\n            //     const bNum = req.params.bNum;\n            //     // const posts = await conn.query(`call usp_get_list_board(?);`);\n            //     const posts = await conn.query('SELECT * FROM board WHERE bNum = ?', [bNum]);\n            //     if(posts.length > 0 ){\n            //         res.json(posts[0]);\n            //     }\n            // }catch (e) {\n            //     console.log(e);\n            // }\n            console.log('update');\n        }\n\n//       `SELECT A.*, @RNUM := @RNUM + 1 ROWNUM FROM board A, (SELECT @RNUM := 0) R ORDER BY A.bNum`\n\n//  1.   @rownum := @rownum+1 AS RNUM 은 행을 불러올때마다 1을 더해서 출력하겠다 이다.\n//  2.   SELECT @rownum :=0) AS R 는 @rownum을 0으로 초기화해 SELECT 하겠다 이다.\n\n\n        //post\n         async createPost(req: Request, res: Response) {\n            // const conn = await connect();\n            // try {\n            //     const newBoard: Board = req.body;\n            //\n            //     // await conn.query('INSERT INTO board SET ?', [newBoard]);\n            //     await conn.query('CALL usp_add_board(?);', [newBoard]);\n            //\n            //     res.json({\n            //         message: 'New Post Created'\n            //     });\n            //\n            // }catch (e) {\n            //     console.log(e);\n            // }\n        \n            console.log('update');\n        }\n\n\n\n        //delete\n         async deletePost(req: Request, res: Response) {\n            // const conn = await connect();\n            // try {\n            //     const bNum = req.params.bNum;\n            //\n            //\n            //     await conn.query('DELETE FROM board WHERE bNum = ?', [bNum]);\n            //     res.json({\n            //         message: 'Post deleted'\n            //     });\n            //\n            // }catch (e) {\n            //     console.log(e);\n            // }\n        \n            console.log('update');\n        }\n\n\n        //update\n         async updatePost(req: Request, res: Response) {\n            // const conn = await connect();\n            // try {\n            //     const bNum = req.params.bNum;\n            //     const updateBoard: Board = req.body;\n            //\n            //     await conn.query('UPDATE board set ? WHERE bNum = ?', [updateBoard, bNum]);\n            //     res.json({\n            //         message: 'Post Updated'\n            //     });\n            //\n            // }catch (e) {\n            //     console.log(e);\n            // }\n            console.log('update');\n        }\n     \n    }\n    export const postController = new PostController();\n\n\n    \n\n\n\n\n\n\n\n\n\n"]}